checkout:
  post:
    - mkdir -p ${GOPATH/:*/}/src/github.com/casualjim
    - ln -sf `pwd` ${GOPATH/:*/}/src/github.com/casualjim/go-swagger
dependencies:
  pre:
    - go get github.com/golang/lint/golint

    # code coverage
    - go get golang.org/x/tools/cmd/...
    - go get github.com/mattn/goveralls

    # get the dependencies etc
    - go get github.com/tools/godep
    - go get github.com/jteeuwen/go-bindata/...
    - go get github.com/elazarl/go-bindata-assetfs/...

  override:
    - godep restore
    - golint ./...
test:
  override:
    - cd ${GOPATH/:*/}/src/github.com/casualjim/go-swagger
    - godep go test -race ./...
    - GOPATH=`godep path`:$GOPATH goveralls -service=circle-ci -repotoken=$COVERALLS_TOKEN
