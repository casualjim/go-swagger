checkout:
  post:
    - mkdir -p ${GOPATH/:*/}/src/github.com/casualjim
    - ln -sf `pwd` ${GOPATH/:*/}/src/github.com/casualjim/go-swagger
dependencies:
  pre:
    - go get github.com/golang/lint/golint

    # code coverage
    - go get golang.org/x/tools/cmd/...
    - go get github.com/axw/gocov/gocov
    - go get github.com/mattn/goveralls

    # get the dependencies etc
    - go get github.com/tools/godep
    - go get github.com/jteeuwen/go-bindata/...
    - go get github.com/elazarl/go-bindata-assetfs/...

  override:
    - cd ${GOPATH/:*/}/src/github.com/casualjim/go-swagger
    - golint ./...:
        pwd: ${GOPATH/:*/}/src/github.com/casualjim/go-swagger
    - go tool vet -printf=false -structtags=false `pwd`:
        pwd: ${GOPATH/:*/}/src/github.com/casualjim/go-swagger
    - godep restore
test:
  override:
    - godep go test -race ./...:
        pwd: ${GOPATH/:*/}/src/github.com/casualjim/go-swagger

    - GOPATH=`godep path`:$GOPATH goveralls -service=circle-ci -repotoken=$COVERALLS_TOKEN:
        pwd: ${GOPATH/:*/}/src/github.com/casualjim/go-swagger
