dependencies:
  pre:
    - go get github.com/golang/lint/golint

    # code coverage
    - go get golang.org/x/tools/cmd/...
    - go get github.com/axw/gocov/gocov
    - go get gopkg.in/matm/v1/gocov-html
    #- go get github.com/mattn/goveralls

    # get the dependencies etc
    - go get github.com/tools/godep
    - go get github.com/jteeuwen/go-bindata/...
    - go get github.com/elazarl/go-bindata-assetfs/...

  override:
    - golint ./...:
        pwd: ../.go_workspace/src/github.com/go-swagger/go-swagger
    # - go tool vet -printf=false -structtags=false `pwd`:
    #     pwd: ../.go_workspace/src/github.com/go-swagger/go-swagger
    - godep restore
test:
  override:
    - godep go test -race ./...:
        pwd: ../.go_workspace/src/github.com/go-swagger/go-swagger
    - ./coverage.sh:
        pwd: ../.go_workspace/src/github.com/go-swagger/go-swagger
  post:
    #- goveralls -coverprofile=profile.cov -service=circleci -repotoken=$COVERALLS_REPO_TOKEN
notify:
  webhooks:
    # A list of hook hashes, containing the url field
    # gitter hook
    - url: https://webhooks.gitter.im/e/9df333473f609f62a215
